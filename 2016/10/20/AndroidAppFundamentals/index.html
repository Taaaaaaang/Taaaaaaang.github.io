<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>AndroidAppFundamentals | å­¦ä¹ æ˜¯ä¸€ç”Ÿçš„äº‹æƒ…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>
</html>
<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2016/10/20/AndroidAppFundamentals/">AndroidAppFundamentals</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">October 20 2016</p>
  </section>

  <section class="article-entry">
    <p>Androidåº”ç”¨æ˜¯ä½¿ç”¨Javaç¼–å†™, AndroidSDKå·¥å…·ç¼–è¯‘,è¿åŒä»»ä½•æ•°æ®å’Œèµ„æºæ–‡ä»¶ä¸€èµ·æ‰“åŒ…æˆä¸€ä¸ªAPK(Android Package), åç¼€åæ˜¯.apkçš„å½’æ¡£æ–‡ä»¶. ä¸€ä¸ªAPKæ–‡ä»¶åŒ…å«ä¸€ä¸ªAndroidåº”ç”¨çš„æ‰€æœ‰å†…å®¹,è€Œä¸”æ˜¯Androidè®¾å¤‡ç”¨æ¥å®‰è£…åº”ç”¨çš„æ–‡ä»¶.</p>
<p>ä¸€æ—¦å®‰è£…åˆ°è®¾å¤‡ä¸­, æ¯ä¸€ä¸ªAndroidåº”ç”¨éƒ½å·¥ä½œåœ¨è‡ªå·±çš„sercurity sandboxä¸­:</p>
<ul>
<li>Androidæ“ä½œç³»ç»Ÿæ˜¯multi-userçš„Linuxç³»ç»Ÿ, æ¯ä¸€ä¸ªAppéƒ½æ˜¯ a different user.</li>
<li>é»˜è®¤æƒ…å†µä¸‹, ç³»ç»Ÿä¼šä¸ºæ¯ä¸€ä¸ªAppåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„Linux user ID(is used only by system and is unknow to the app). ç³»ç»Ÿä¼šä¸ºè¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰æ–‡ä»¶è®¾å®šæƒé™,åªæœ‰è¢«åˆ†é…äº†ç›¸åº”çš„User IDçš„é‚£ä¸ªåº”ç”¨æ‰èƒ½è®¿é—®.</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„VM, æ‰€ä»¥ä¸€ä¸ªåº”ç”¨æ˜¯ä¸å…¶ä»–åº”ç”¨éš”ç¦»è¿è¡Œçš„.</li>
<li>é»˜è®¤æƒ…å†µä¸‹, æ¯ä¸ªåº”ç”¨å…è®¸åœ¨å®ƒè‡ªå·±çš„Linuxè¿›ç¨‹ä¸­, å½“ä»»ä½•åº”ç”¨çš„ç»„ä»¶(æ¯”å¦‚activity, serviceç­‰)éœ€è¦è¿è¡Œèµ·æ¥æ—¶, Androidç³»ç»Ÿå°±ä¼šå¼€å¯è¿›ç¨‹, å¹¶å½“ä¸åœ¨éœ€è¦æˆ–è€…èµ„æºå›æ”¶æ—¶å…³é—­è¿™ä¸ªè¿›ç¨‹.</li>
</ul>
<p>åŸºäºä¸Šè¿°æ–¹é¢, Androidç³»ç»Ÿä½¿ç”¨æœ€å°æƒé™åŸåˆ™. ä¹Ÿå°±æ˜¯è¯´, æ¯ä¸€ä¸ªåº”ç”¨é»˜è®¤åªèƒ½è®¿é—®å®ç°å¿…è¦åŠŸèƒ½çš„components and no more. è¿™å°±ä¿è¯äº†ä¸€ä¸ªæ²¡æœ‰æˆæƒå°±ä¸èƒ½è®¿é—®ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†çš„å®‰å…¨ç¯å¢ƒ.</p>
<p>å½“ç„¶, è¿˜æ˜¯æœ‰å‡ ç§æ–¹å¼å¯ä»¥è®©åº”ç”¨å…±äº«æ•°æ®ç»™å…¶ä»–åº”ç”¨æˆ–è€…è®¿é—®ç³»ç»ŸæœåŠ¡:</p>
<ul>
<li>å…±äº«åŒä¸€ä¸ªLinux user IDçš„åº”ç”¨é—´å¯ä»¥ç›¸äº’è®¿é—®å½¼æ­¤çš„æ–‡ä»¶. ä¸ºäº†èŠ‚çº¦èµ„æº, å…±äº«user IDçš„Appså¯ä»¥è¿è¡Œåœ¨ç›¸åŒçš„Linuxè¿›ç¨‹ä¸”å…±äº«VM(åº”ç”¨ç¨‹åºä¹Ÿå¿…é¡»ä½¿ç”¨ç›¸åŒçš„ç­¾åè¯ä¹¦).</li>
<li>åº”ç”¨å¯ä»¥ç”³è¯·è®¿é—®è®¾å¤‡æ•°æ®çš„æƒé™,æ¯”å¦‚é€šè®¯å½•, SMS çŸ­ä¿¡, å­˜å‚¨å¡, ç›¸æœº, è“ç‰™ç­‰ç­‰. æ‰€æœ‰çš„permissionéƒ½å¿…é¡»åœ¨å®‰è£…åº”ç”¨æ—¶ç”±ç”¨æˆ·æˆæƒ.</li>
</ul>
<p>æˆ‘ä»¬åˆ†ä¸€ä¸‹å‡ éƒ¨åˆ†æ¥è®¨è®ºAndroidåŸºæœ¬çŸ¥è¯†:</p>
<ol>
<li>æ„æˆåº”ç”¨çš„æ ¸å¿ƒç»„ä»¶(Core framework components)</li>
<li>ç”¨æ¥å£°æ˜åº”ç”¨ç»„ä»¶ä»¥åŠåº”ç”¨å¯¹è®¾å¤‡featureçš„éœ€æ±‚(å¦‚ç›¸æœºç­‰)çš„AndroidManifestæ–‡ä»¶</li>
<li>ç‹¬ç«‹äºä»£ç çš„èµ„æºæ–‡ä»¶,ä»¥åŠä¼˜åŒ–appä»¥é€‚åº”ä¸åŒè®¾å¤‡é…ç½®</li>
</ol>
<h3 id="åº”ç”¨ç»„ä»¶-App-Components"><a href="#åº”ç”¨ç»„ä»¶-App-Components" class="headerlink" title="åº”ç”¨ç»„ä»¶(App Components)"></a>åº”ç”¨ç»„ä»¶(App Components)</h3><p>App conmponentsæ˜¯æ„å»ºåº”ç”¨çš„å¿…è¦building block, æ¯ä¸€ä¸ªç»„ä»¶éƒ½æ˜¯ç³»ç»Ÿåˆ°æˆ‘ä»¬Appçš„å…¥å£. å¯¹äºç”¨æˆ·æ¥è¯´å¹¶éæ‰€æœ‰çš„componentséƒ½æ˜¯å…¥å£, ä¸€äº›ç»„ä»¶ä¹‹é—´ä¹Ÿæ˜¯æœ‰ä¾èµ–çš„. ä½†æ˜¯æ¯ä¸€ä¸ªç»„ä»¶éƒ½exists as its own entity and plays a specific role â€“ each one is a unique building block that helps define your appâ€™s overall behavior.</p>
<p>Androidæœ‰å››ç§ä¸åŒç±»å‹çš„ç»„ä»¶. æ¯ä¸€ç§ç±»å‹éƒ½æœ‰æ˜æ˜¾çš„ç›®çš„å’Œæ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸ(ä½•æ—¶åˆ›å»ºä½•æ—¶é”€æ¯):</p>
<h4 id="Activity"><a href="#Activity" class="headerlink" title="Activity:"></a>Activity:</h4><p>Activity<strong>ä»£è¡¨</strong>ä¸€ä¸ªå¸¦æœ‰ç”¨æˆ·ç•Œé¢çš„screen. æ¯”å¦‚ä¸€ä¸ªMail Appä¼šæœ‰ä¸€ä¸ªactivityæ˜¾ç¤ºé‚®ä»¶åˆ—è¡¨, å¦ä¸€ä¸ªactivityç”¨æˆ·å†™é‚®ä»¶, è¿˜æœ‰ä¸€ä¸ªç”¨äºè¯»é‚®ä»¶. è™½ç„¶è¿™äº›activitiesååŒå·¥ä½œæ„æˆäº†ä¸€ä¸ªç´§å‡‘çš„ç”¨æˆ·ä½“éªŒ, ä½†æ˜¯æ¯ä¸€ä¸ªéƒ½æ˜¯ç‹¬ç«‹çš„. å› æ­¤å¦ä¸€ä¸ªAppå¯ä»¥å¯åŠ¨å…¶ä¸­ä»»ä¸€ä¸ªactivity(if the email app allows it). æ¯”å¦‚ä¸€ä¸ªæ‹ç…§çš„åº”ç”¨å¯ä»¥å¯åŠ¨é‚®ä»¶Appä¸­çš„å†™é‚®ä»¶çš„activityæ¥åœ¨é‚®ä»¶ä¸­åˆ†äº«å›¾ç‰‡.  Activityä½¿å¾— system ä¸æˆ‘ä»¬ App ä¹‹é—´çš„äº¤äº’æ›´æ–¹ä¾¿:</p>
<ul>
<li>ç”¨æ¥æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„â€èšç„¦â€çš„å†…å®¹, ç¡®ä¿ system keeps running the process that is hosting the activity;</li>
<li>ç»´æŠ¤ç”¨æˆ·æœ€è¿‘ä½¿ç”¨çš„(è¿˜å¯èƒ½è¿”å›çš„)â€æµç¨‹â€ç•Œé¢(å³ stopped activities);</li>
<li>å¸®åŠ© App å¤„ç†å½“è¿›ç¨‹è¢«å¹²æ‰æ—¶, ä¿ç•™ç¬é—´çš„çŠ¶æ€, ä»¥ä¾¿æ¢å¤ä¹‹å‰çš„çŠ¶æ€;</li>
<li>æä¾›Apps é—´æ“ä½œæµ ç›¸äº’äº¤äº’, ä»¥åŠç³»ç»Ÿæ¥åè°ƒæ“ä½œæµ;</li>
</ul>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service:"></a>Service:</h4><p>A service is a component that runs in the background to perform long-running operations or to perform work for remote processes. serviceæ²¡æœ‰UIç•Œé¢. æ¯”å¦‚ç”¨æˆ·åœ¨ä½¿ç”¨å¦ä¸€ä¸ªAppæ—¶,åŒæ—¶ä¸€ä¸ªserviceåœ¨åå°æ’­æ”¾ç€éŸ³ä¹, æˆ–è€…æ˜¯ä»ç½‘ç»œæ‹‰å–æ•°æ®è€Œä¸ä¼šæ‰“æ–­æ­£åœ¨ä¸å…¶ä»–Activityäº¤äº’çš„ç”¨æˆ·. å…¶ä»–ç»„ä»¶, æ¯”å¦‚activity, å¯ä»¥å¯åŠ¨å¹¶è¿è¡Œserviceæˆ–è€…ç»‘å®šserviceä»¥å’Œå®ƒäº¤äº’(æ¯”å¦‚æ•°æ®). </p>
<blockquote>
<p>åœ¨ Android 5.0(API Level21)å, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>JobScheduler</code> ç±» to schedule actions.</p>
</blockquote>
<p>####Comtent provider</p>
<p>A comtent provider manages a shared set of app data. æˆ‘ä»¬å¯ä»¥å°†æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­, SQLiteæ•°æ®åº“ä¸­, webä¸Š, æˆ–è€…å…¶ä»–ä»»ä½•ä½ Appå¯ä»¥è®¿é—®çš„æŒä¹…å­˜å‚¨çš„åœ°æ–¹. æ¯”å¦‚Androidç³»ç»Ÿå°±æœ‰ä¸€ä¸ªcontent provideræ¥æŒ‚ä½ é€šè®¯å½•ä¿¡æ¯. åƒè¿™æ ·, ä»»ä½•æœ‰é€‚å½“æƒé™çš„åº”ç”¨å°±å¯ä»¥æŸ¥è¯¢content provideréƒ¨åˆ†(æ¯”å¦‚<code>ContactsContract.Data</code>)æ¥è¯»å†™ç‰¹å®šè”ç³»äººçš„ä¿¡æ¯.</p>
<p>Content Porvideråœ¨è¯»å†™åº”ç”¨ç§æœ‰æ•°æ®æ–¹é¢ä¹Ÿå¾ˆæœ‰ç”¨. æ¯”å¦‚ç¬”è®°åº”ç”¨å°±å¯ä»¥ä½¿ç”¨content provideræ¥ä¿å­˜ç¬”è®°.</p>
<p>A content provider is implemented as a subclass of <code>ContentProvider</code> and must implement a standard set of APIs that enable other apps to perform transactions.</p>
<h4 id="Broadcast-receivers"><a href="#Broadcast-receivers" class="headerlink" title="Broadcast receivers"></a>Broadcast receivers</h4><p>A broadcast receiver is a component that responds to system-wide broadcast announcements. è®¸å¤šå¹¿æ’­éƒ½æ˜¯ç³»ç»Ÿå‘å‡ºçš„, æ¯”å¦‚æ¯å±å¹¿æ’­, ä½ç”µé‡å¹¿æ’­, æ‹ç…§å¹¿æ’­ç­‰. Appä¹Ÿå¯ä»¥å‘å¹¿æ’­, æ¯”å¦‚é€šçŸ¥å…¶ä»–Appæœ‰æ•°æ®ä¸‹è½½å®Œæˆå¯ä»¥ä½¿ç”¨. å°½ç®¡broadcast receiverä¸æä¾›ç•Œé¢, å®ƒä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªçŠ¶æ€æ é€šçŸ¥æ¥æç¤ºç”¨æˆ·ç›¸åº”çš„<strong>äº‹ä»¶</strong>. æ›´é€šä¿—æ¥è®², broadcast receiverä»…ä»…åƒå…¶ä»–ç»„ä»¶(components)çš„â€ç½‘å…³â€ä¸€æ ·, é€‚åˆdo a very inimal amount of work. æ¯”å¦‚, æ ¹æ®ç‰¹å®šäº‹ä»¶å¯åŠ¨ä¸€ä¸ªserviceæ¥perform some work.</p>
<p>A broadcast receiver is implemented as a subclass of <code>BroadcastReceiver</code> and each broadcast is delivered as an <code>Intent</code> object.</p>
<p>Androidç³»ç»Ÿè®¾è®¡ä¸€ä¸ªæ¯”è¾ƒç‹¬ç‰¹çš„æ–¹é¢å°±æ˜¯ä¸€ä¸ªåº”ç”¨å¯ä»¥(æƒé™å…è®¸çš„æƒ…å†µä¸‹)å¯åŠ¨å¦ä¸€ä¸ªåº”ç”¨çš„ç»„ä»¶. æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªåº”ç”¨éœ€è¦ä½¿ç”¨ç›¸æœºæ‹ç…§, è€Œå¦ä¸€ä¸ªåº”ç”¨å®ç°äº†æ‹ç…§çš„åŠŸèƒ½, é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è°ƒç”¨è€Œä¸æ˜¯è‡ªå·±å¼€å‘ä¸€ä¸ªactivityæ¥å®ç°æ‹ç…§. æˆ‘ä»¬åº”ç”¨ä¸éœ€è¦ä¸æ‹ç…§åŠŸèƒ½çš„Appæœ‰äº¤äº’ç”šè‡³åœ¨ä»£ç å±‚é¢çš„é“¾æ¥. æˆ‘ä»¬åªéœ€è¦startæ‹ç…§åº”ç”¨çš„ç›¸åº”activityå°±å¯ä»¥å®ç°, å®Œæˆä¹‹å, ç…§ç‰‡ç”šè‡³å¯ä»¥ç›´æ¥å°±â€è¿”åˆ°â€æˆ‘ä»¬çš„åº”ç”¨é‡Œäº†. å¯¹äºç”¨äºæ¥è¯´, çœ‹èµ·æ¥å°±åƒæˆ‘ä»¬åº”ç”¨è‡ªå·±æœ‰æ‹ç…§åŠŸèƒ½ä¸€æ ·.</p>
<p>å½“ç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªåº”ç”¨çš„ç»„ä»¶æ—¶, åŒæ—¶å°±å¯åŠ¨äº†è¿™ä¸ªåº”ç”¨è¿›ç¨‹(å¦‚æœä¹‹å‰è¿™ä¸ªåº”ç”¨æ²¡æœ‰å¯åŠ¨)å¹¶ä¸”åˆå§‹åŒ–ç»„ä»¶ä¼šç”¨åˆ°çš„çš„classes. æ¯”å¦‚, å½“æˆ‘ä»¬å¯åŠ¨äº†æ‹ç…§åº”ç”¨ä¸­ç›¸åº”çš„æ‹ç…§çš„activity, å…¶å®è¿™ä¸ªactivityæ˜¯åœ¨run in the process that belongs to the camera app, not in your appâ€™s processs. å› æ­¤, ä¸åƒç³»ç»Ÿçš„å¤§éƒ¨åˆ†å…¶ä»–åº”ç”¨, Androidåº”ç”¨æ˜¯æ²¡æœ‰ä¸€ä¸ªå•ç‹¬å…¥å£çš„(æ²¡æœ‰main()å‡½æ•°).</p>
<p>å› ä¸ºç³»ç»Ÿä¸­æ¯ä¸ªAppéƒ½æ˜¯è¿è¡Œåœ¨è‡ªå·±ç‹¬ç«‹çš„è¿›ç¨‹ä¸­çš„, å¹¶ä¸”æ‹¥æœ‰ç‹¬ç«‹çš„æƒé™æ¥é™åˆ¶å…¶ä»–åº”ç”¨çš„è®¿é—®. æ‰€ä»¥åº”ç”¨ä¸èƒ½ç›´æ¥activateå…¶ä»–åº”ç”¨çš„æŸä¸ªç»„ä»¶. ä½†æ˜¯Androidç³»ç»Ÿå¯ä»¥. å› æ­¤,è¦æƒ³activeå…¶ä»–åº”ç”¨çš„ç»„ä»¶, å¿…é¡»å‘é€ä¸€ä¸ªå£°æ˜ä½ çš„<code>Intent</code>çš„messageç»™system, è¿™æ ·ç³»ç»Ÿæ‰ä¼šä¸ºæˆ‘ä»¬activateç›¸åº”çš„ç»„ä»¶.</p>
<h3 id="Activating-Components"><a href="#Activating-Components" class="headerlink" title="Activating Components"></a>Activating Components</h3><p>å››ç§ç±»å‹ç»„ä»¶ä¸­çš„ä¸‰ä¸ª: activity, service, broadcast receiverâ€“ éƒ½æ˜¯å¯ä»¥è¢«ä¸€ä¸ªå«åš<code>Intent</code>çš„å¼‚æ­¥æ¶ˆæ¯æ¥æ¿€æ´». è¿™äº›Intents åœ¨è¿è¡Œæ—¶å°†ç›¸äº’ç‹¬ç«‹çš„ç»„ä»¶ç»‘å®šåˆ°ä¸€èµ·,ä¸è®ºè¿™ä¸ªç»„ä»¶å±äºä½ çš„åº”ç”¨è¿˜æ˜¯å±äºå…¶ä»–åº”ç”¨. æˆ‘ä»¬å¯ä»¥å°†intentçœ‹åšæ˜¯è¯·æ±‚å…¶ä»–ç»„ä»¶åŠ¨ä½œçš„ä¸€ä¸ªä¸­é—´ä¼ è¯ç€.</p>
<p>An intent is createdd with an <code>Intent</code> object, which defines a message to activate either a specific component or a specific type of component - an intent can be either explicit or implicit, respectively.</p>
<p>å¯¹äºactivitieså’Œserviceesæ¥è¯´, an intent defines <strong>the action</strong> to perform(æ¯”å¦‚è¦æŸ¥çœ‹æˆ–è€…å‘é€something) and may <strong>specify the URI of the data to act on</strong>(æˆ–è€…å…¶ä»–çš„things that the component being started might need to know). æ¯”å¦‚ä¸€ä¸ªintentå¯ä»¥è¡¨è¾¾ä¸€ä¸ªactivityå‘å‡ºçš„è¯·æ±‚æ˜¾ç¤ºå›¾ç‰‡æˆ–è€…æ‰“å¼€ç½‘é¡µ çš„request. åœ¨æŸäº›æƒ…å†µä¸‹, æˆ‘ä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªactivityæ¥è·å–è¿”å›çš„ç»“æœ, ç„¶åè¿™ä¸ªactivityä¼šå°†ç»“æœâ€åŒ…â€åœ¨intentä¸­è¿”ç»™æˆ‘ä»¬. (æ¯”å¦‚, æˆ‘ä»¬å¯ä»¥å‘å‡ºä¸€ä¸ªintentè®©ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªè”ç³»äººç„¶åå°†ä¿¡æ¯è¿”å›ç»™ä½ â€“ è¿”å›çš„intentä¸­ includes a URI pointing to the chosen contact.)</p>
<p>å¯¹äºbroadcast receiveræ¥è¯´, intentç®€å•åœ°å®šä¹‰äº†è¦å¹¿æ’­çš„announcement(æ¯”å¦‚ä½ç”µé‡å¹¿æ’­, includes only a known action string that indicates â€œbattery is lowâ€).</p>
<p>è€Œcontent providerä¸æ˜¯ç”¨intent æ¿€æ´»çš„. It is activated when targeted by a request from a <code>ContentResolver</code>. è¿™ä¸ªcontent resolveré…åˆcontent provider å¤„ç†æ‰€æœ‰çš„direct transactions. æ‰€ä»¥ the component thatâ€™s performing transactions with the provider doesnâ€™t need to and instead calls methods on the <code>ContentResolver</code> object.  This leaves a layer of abstraction between the content provider and the conponent requesting information(for security).</p>
<p>æ¯ç§ç±»å‹çš„componentéƒ½æœ‰ç›¸åº”çš„æ¿€æ´»æ–¹æ³•:</p>
<ul>
<li>å¯¹äºActivity: ä¼ ä¸€ä¸ª<code>Intent</code>å‚æ•°ç»™<code>startActivity()</code>æˆ–è€… <code>startActivityForResult()</code>(when you want the activity to return an result).</li>
<li>å¯¹äºservice: ä¼ ä¸€ä¸ª<code>Intent</code>ç»™ <code>startService()</code>. æˆ–è€…å°†ä¸€ä¸ªIntentç»‘å®šåˆ°service:ä¼ ä¸€ä¸ªIntentåˆ°<code>bingService()</code>æ–¹æ³•.</li>
<li>å‘å¹¿æ’­: ä¼ ä¸€ä¸ª<code>Intent</code>ç»™<code>sendBroadcast()</code>æˆ–è€…<code>sendOrderedBroadcast()</code>æˆ–è€…<code>sendStickyBroadcast()</code>.</li>
<li>You can perform a query to a content provider by calling <code>query()</code> on a <code>ContentResolver</code>.</li>
</ul>
<h3 id="The-Manifest-File"><a href="#The-Manifest-File" class="headerlink" title="The Manifest File"></a>The Manifest File</h3><p>åœ¨Androidç³»ç»Ÿå¯åŠ¨åº”ç”¨ç»„ä»¶ä¹‹å‰, systemå¿…ç„¶ä¼šå…ˆé€šè¿‡è¯»å–<code>AndroidManifest.xml</code>æ–‡ä»¶æ¥ç¡®è®¤è¿™ä¸ªcomponentå­˜åœ¨. æˆ‘ä»¬å¿…é¡»åœ¨æ­¤æ–‡ä»¶ä¸­å£°æ˜æ‰€æœ‰çš„component.</p>
<p>é™¤äº†å¯ä»¥ç”¨æ¥å£°æ˜appçš„componentså¤–, manifestè¿˜å¯ä»¥:</p>
<ol>
<li>ç¡®è®¤Appéœ€è¦çš„ç”¨æˆ·æƒé™, æ¯”å¦‚è®¿é—®ç½‘ç»œ, è¯»å–ç”¨æˆ·é€šè®¯å½•ç­‰</li>
<li>å£°æ˜åº”ç”¨éœ€æ±‚çš„æœ€ä½API level, based on which APIs the app uses.</li>
<li>å£°æ˜åº”ç”¨éœ€æ±‚çš„ç¡¬ä»¶æˆ–è€…è½¯ä»¶features, æ¯”å¦‚æ‘„åƒå¤´, è“ç‰™æœåŠ¡, æˆ–è€…å¤šç‚¹è§¦æ‘¸å±.</li>
<li>éœ€è¦é“¾æ¥çš„API Libraries, æ¯”å¦‚Google Maps library.<br>â€¦</li>
</ol>
<h4 id="å£°æ˜ç»„ä»¶"><a href="#å£°æ˜ç»„ä»¶" class="headerlink" title="å£°æ˜ç»„ä»¶"></a>å£°æ˜ç»„ä»¶</h4><p>æ¯”å¦‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;manifest ... &gt;</span><br><span class="line">    &lt;application android:icon=&quot;@drawable/app_icon.png&quot; ... &gt;</span><br><span class="line">        &lt;activity android:name=&quot;com.example.project.ExampleActivity&quot;</span><br><span class="line">                  android:label=&quot;@string/example_label&quot; ... &gt;</span><br><span class="line">        &lt;/activity&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>

<p><application>å…ƒç´ ä¸­<code>android:icon</code>å±æ€§æŒ‡å‘èµ„æºæ–‡ä»¶ä¸­çš„appçš„icon.</application></p>
<p><activity>å…ƒç´ ä¸­, <code>android:name</code>å±æ€§æŒ‡å®šactivityçš„ç±»åå…¨ç§°, <code>android:label</code>å±æ€§æŒ‡æ˜activityä¸­çš„labelä¸­çš„ç”¨æˆ·å¯è§†çš„å­—ç¬¦ä¸².</activity></p>
<p>æˆ‘ä»¬å¿…é¡»æŒ‰ç…§ä»¥ä¸‹å½¢å¼å£°æ˜æ‰€æœ‰çš„app components:</p>
<ul>
<li><p><activity> ä»£è¡¨activity</activity></p>
</li>
<li><p><service>  ä»£è¡¨service</service></p>
</li>
<li><p><receiver> ä»£è¡¨broadcast receiver</receiver></p>
</li>
<li><p><provider> ä»£è¡¨content provider</provider></p>
<p>Activities, services ä»¥åŠ content providers, å¦‚æœä¸åœ¨ manifest æ–‡ä»¶ä¸­å£°æ˜,  é‚£ä¹ˆå…¶å¯¹äº system æ˜¯ä¸å¯è§çš„, ä¹Ÿæ— æ³•æ‰§è¡Œåˆ°. è€Œ broadcast receivers å¯ä»¥åœ¨ manifest æ–‡ä»¶ä¸­å£°æ˜æˆ–è€…ç›´æ¥åŠ¨æ€åˆ›å»º(ç”± BroadcastReceiver å¯¹è±¡)å¹¶å…¶é€šè¿‡<code>registerReceiver()</code>.</p>
</li>
</ul>
<h4 id="å£°æ˜-component-çš„åŠŸèƒ½"><a href="#å£°æ˜-component-çš„åŠŸèƒ½" class="headerlink" title="å£°æ˜ component çš„åŠŸèƒ½"></a>å£°æ˜ component çš„åŠŸèƒ½</h4><p>æ­£å¦‚ä¸Šè¿°, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Intent æ¥æ¿€æ´» components( åŒ…æ‹¬ service, activity, broadcast receivers). æˆ‘ä»¬å¯ä»¥æ˜ç¡® intent çš„ targetæ¥æŒ‡å®šæ‰“å¼€æŸç±» component, ä¹Ÿå¯ä»¥ä½¿ç”¨ intent æ¥ æ‰§è¡ŒæŸä¸­ç±»å‹çš„ action, è¿™ç§éšå¼çš„ intent ç”±ç³»ç»Ÿæ¥æŸ¥æ‰¾è®¾å¤‡ä¸Šç›¸åº”çš„ components, ç„¶åç”¨æˆ·å¯é€‰æ‹©ç›¸åº”çš„ components æ¥å¯åŠ¨å®ƒ. é‚£ä¹ˆç³»ç»Ÿæ˜¯å¦‚ä½•æŸ¥æ‰¾å¹¶è·çŸ¥ æŸä¸ª App å¯ä»¥å“åº”å¯¹åº”çš„ intent å‘¢?<br><strong>intent filter</strong>: App çš„ manifest æ–‡ä»¶ä¸­ç”¨æ¥å£°æ˜ App çš„æŸä¸ª component å¯ä»¥å“åº”çš„ intent, ä¸¾ä¸ªğŸŒ°:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">...</span> &gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">...</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.example.project.ComposeEmailActivity"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.SEND"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:type</span>=<span class="string">"*/*"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> å¦‚æœæŸä¸ª app ç”Ÿæˆä¸€ä¸ª intent( å…¶action ä¸º ACTION_SEND), å¹¶è°ƒç”¨äº†<code>startActivity()</code>, ç³»ç»Ÿå°±ä¼šæŸ¥æ‰¾åˆ° App çš„ ComposeEmailActivity å¯ä»¥å“åº”æ­¤ç±» intent, é‚£ä¹ˆæ­¤ activity å°±ä¼šæ”¾åˆ°å¾… start åˆ—è¡¨ä¸­ä¾›è°ƒç”¨(å¦‚æœåªæœ‰ä¸€ä¸ª,åˆ™ç›´æ¥è°ƒç”¨,å¦åˆ™ç”¨æˆ·é€‰æ‹©)</p>
<h4 id="å£°æ˜åº”ç”¨çš„-requirements"><a href="#å£°æ˜åº”ç”¨çš„-requirements" class="headerlink" title="å£°æ˜åº”ç”¨çš„ requirements"></a>å£°æ˜åº”ç”¨çš„ requirements</h4><p>ç”±äºAndroidè®¾å¤‡çº·ç¹å¤æ‚, ç¡¬ä»¶é…ç½®ä¸å°½ç›¸åŒ. ä¸ºäº†é˜²æ­¢æœ‰äº›è®¾å¤‡ç¼ºä¹æŸäº›featureä¸ç¬¦åˆä½ åº”ç”¨çš„ç¡¬ä»¶è¦æ±‚, æˆ‘ä»¬å¾ˆæœ‰å¿…è¦åœ¨Manifestæ–‡ä»¶ä¸­å£°æ˜æˆ‘ä»¬çš„appæ‰€æ”¯æŒçš„è®¾å¤‡ç±»å‹åŠè½¯ä»¶è¦æ±‚. Most of these declarations are informational only and the system does not read them, but external services such as Google Play do read them in order to provide filtering for users when they search for apps from their device.</p>
<p>æ¯”æ–¹è¯´, å¦‚æœæˆ‘ä»¬çš„åº”ç”¨require a camera å¹¶ä¸”ä½¿ç”¨(API Level7)  æˆ‘ä»¬éœ€è¦åœ¨Manifestæ–‡ä»¶ä¸­å£°æ˜:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest ... &gt;</span><br><span class="line">    &lt;uses-feature android:name=&quot;android.hardware.camera.any&quot;</span><br><span class="line">                  android:required=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;uses-sdk android:minSdkVersion=&quot;7&quot; android:targetSdkVersion=&quot;19&quot; /&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆ, å¦‚æœè®¾å¤‡æ²¡æœ‰cameraå¹¶ä¸”API Levelä½äº API Level7. é‚£ä¹ˆyou cannot install your app from Google Play.</p>
<h4 id="App-Resources"><a href="#App-Resources" class="headerlink" title="App Resources"></a>App Resources</h4><p>Androidåº”ç”¨é€šå¸¸è¿˜ä¼šåŒ…å«ä¸€ç³»åˆ—çš„èµ„æºæ–‡ä»¶, æ¯”å¦‚å›¾ç‰‡,éŸ³è§†é¢‘æˆ–è€…å…¶ä»–ä»»ä½• relating to the visual presentation of the app. æ¯”å¦‚æˆ‘ä»¬ä¼šä½¿ç”¨XMLå®šä¹‰ä¸€äº›åŠ¨ç”», èœå•, UI é£æ ¼, é¢œè‰²ä»¥åŠå¸ƒå±€. è¿™äº›éƒ½ä½¿å¾—æˆ‘ä»¬ä¸åŠ¨ä»£ç å°±å¯ä»¥update åº”ç”¨çš„ç‰¹æ€§.</p>
<p>ä¸€ä¸ªAndroidå·¥ç¨‹çš„æ¯ä¸ªèµ„æºæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªID(è¿™ä¸ªå·¥ä½œæ˜¯ android SDK build tools åšçš„), è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç ä¸­æˆ–å…¶ä»–åœ°æ–¹å¼•ç”¨è¿™ä¸ªèµ„æº. æ¯”å¦‚æœ¬åœ°åŒ–. Androidç³»ç»Ÿé€šè¿‡â€™ä¿®é¥°è¯â€™(qualifiers) æ¥æ”¯æŒä¸åŒé…ç½®æ‰€éœ€çš„èµ„æº.</p>
<p> å°†ä»£ç ä¸èµ„æºåˆ†ç¦»çš„ä¸€ä¸ªæœ€é‡è¦çš„å› ç´ æ˜¯ä¸ºäº†ç»™ä¸åŒç±»å‹çš„è®¾å¤‡é…ç½®ä¸åŒçš„èµ„æº. æ¯”å¦‚, åœ¨ XML ä¸­å®šä¹‰ UI strings, æˆ‘ä»¬å°±å¯ä»¥å°† UI ä¸­å‡ºç°çš„string, å¯¹åº”ä¸åŒè¯­è¨€çš„æ–‡ä»¶åˆ†ç¦»å¼€æ¥. æ¯”å¦‚<code>res/values-fr)çš„å®šå‹è¯(qulifier)</code>fr` å¯¹åº”çš„å°±æ˜¯ç”¨æˆ·è¯­è¨€ä¸ºæ³•è¯­æ—¶çš„å–å€¼æ–‡ä»¶.</p>
<p> (éƒ¨åˆ†Android å®˜æ–¹æ–‡æ¡£)</p>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> å­¦ä¹ æ˜¯ä¸€ç”Ÿçš„äº‹æƒ… </p>
      <p class="subtitle">  </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text=Androidåº”ç”¨æ˜¯ä½¿ç”¨Javaç¼–å†™, "
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'Taaaaaaang';
  
  var disqus_url = 'https://taaaaaaang.github.io/2016/10/20/AndroidAppFundamentals/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
