<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>Pythonä¸­çš„yield&amp;&amp;iterator | å­¦ä¹ æ˜¯ä¸€ç”Ÿçš„äº‹æƒ…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>
</html>
<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2017/01/20/Pythonä¸­çš„yield-iterator/">Pythonä¸­çš„yield&&iterator</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">January 20 2017</p>
  </section>

  <section class="article-entry">
    <p>æœ€è¿‘æœ‰åœ¨ç”¨ Python åšç‚¹ä¸œè¥¿, æ¥è§¦ä¸€é—¨æ–°è¯­è¨€å, å¤§æ¦‚ä½ ä¼šæœ‰è¿™ä¹ˆä¸€å¥æƒ³è„±å£è€Œå‡º, â€˜å§æ§½åŸæ¥è¿˜å¯ä»¥è¿™ä¹ˆå¹²?â€™  å…ˆå†™ä¸ªå°éšç¬”</p>
<h1 id="åœ¨Pythonä¸­ä»€ä¹ˆæ—¶å€™ç”¨yield"><a href="#åœ¨Pythonä¸­ä»€ä¹ˆæ—¶å€™ç”¨yield" class="headerlink" title="åœ¨Pythonä¸­ä»€ä¹ˆæ—¶å€™ç”¨yield ?"></a>åœ¨Pythonä¸­ä»€ä¹ˆæ—¶å€™ç”¨yield ?</h1><p>yield å£°æ˜ä¼šå°†å‡½æ•°è¿è¡Œè½¨è¿¹â€™æŒ‚èµ·â€™, ç„¶åå°†å€¼å‘é€ç»™caller, å¹¶ä¸”ä¿ç•™â€™ä¸€å®šçš„â€™çŠ¶æ€ä½¿å¾—å‡½æ•°èƒ½å¤Ÿä»å…¶æŒ‚èµ·çš„åœ°æ–¹â€™æ¢å¤â€™è¿è¡Œ. æ¢å¤è¿è¡Œçš„å‡½æ•°ä¼šç«‹å³ä»ä¸Šæ¬¡yieldçš„åœ°æ–¹æ‰§è¡Œ. è¿™å°±å…è®¸é€æ¬¡äº§ç”Ÿä¸€ç³»åˆ—çš„å€¼, è€Œä¸æ˜¯ä¸€æ¬¡è®¡ç®—å®Œå°†ç»“æœåˆ—è¡¨è¿”å›. ä¸¾ä¸ªğŸŒ°:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A Simple Python program to demonstrate working of yield</span></span><br><span class="line"><span class="comment"># A generator function that yields 1 for first time, 2 second time and 3 third time.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">simpleGeneratorFun</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Driver code to check above generator function</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> simpleGeneratorFun():</span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line">&gt; Output:</span><br><span class="line"> <span class="number">1</span></span><br><span class="line"> <span class="number">2</span></span><br><span class="line"> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>Return</strong>æ˜¯å°†å€¼è¿”ç»™å…¶è°ƒç”¨è€…(caller), è€Œ<strong>Yield</strong>å¯ä»¥ç”Ÿæˆå€¼çš„åºåˆ—. æˆ‘ä»¬åº”å½“åœ¨æˆ‘ä»¬éœ€è¦è¿­ä»£åºåˆ—æ—¶ä½¿ç”¨yield, è€Œä¸æ˜¯å­˜å‚¨æ•´ä¸ªåºåˆ—å€¼çš„æ—¶å€™.</p>
<p><strong>Yield</strong>é€šå¸¸ç”¨åœ¨Pythonç”Ÿæˆå™¨(generator)ä¸­. generatoræ ·å­å’Œå‡½æ•°ç±»ä¼¼, å…³é”®åŒºåˆ«åœ¨äºgeneratorè¿”å›å€¼æ˜¯ç”¨yieldè€Œä¸æ˜¯return. å¦‚æœå‡½æ•°ä½“å†…å­˜åœ¨yield, é‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªgenerator function.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨generatorç”Ÿæˆ1-10çš„å¹³æ–¹çš„æ•°å­—åºåˆ— çš„ç¨‹åº</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nextSquare</span><span class="params">()</span>:</span></span><br><span class="line">    i = i;</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">yield</span> i*i</span><br><span class="line">	i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> nextSquare():</span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">100</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    print(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; Output:</span><br><span class="line"> <span class="number">1</span></span><br><span class="line"> <span class="number">4</span></span><br><span class="line"> <span class="number">9</span></span><br><span class="line"> <span class="number">16</span></span><br><span class="line"> <span class="number">25</span></span><br><span class="line"> <span class="number">36</span></span><br><span class="line"> <span class="number">49</span></span><br><span class="line"> <span class="number">64</span></span><br><span class="line"> <span class="number">81</span></span><br><span class="line"> <span class="number">100</span></span><br></pre></td></tr></table></figure>

<h1 id="Pythonä¸­çš„Iterators"><a href="#Pythonä¸­çš„Iterators" class="headerlink" title="Pythonä¸­çš„Iterators"></a>Pythonä¸­çš„Iterators</h1><p>ä»»ä½•åœ¨Pythonä¸­ç”¨â€™for inâ€™å¾ªç¯çš„ç±»å‹éƒ½å¯ä»¥å«åšIterator. å†…å»ºçš„ç±»å‹æ¯”å¦‚lists, tuples, dicts, setsç­‰ç­‰, å› ä¸ºå®ƒä»¬éƒ½å®ç°äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•(äº‹å®ä¸Š, ä»»ä½•æƒ³è¦æˆä¸ºIteratorçš„ç±»å‹éƒ½è¦å®ç°):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1.</span> __iter__ åœ¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨. è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰**next**æˆ–è€…**__next__**æ–¹æ³•.</span><br><span class="line"><span class="number">2.</span> next/__next__ æ–¹æ³•åº”è¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å€¼. å½“iteratoråœ¨ <span class="keyword">for</span> <span class="keyword">in</span> å¾ªç¯ä¸­æ—¶, <span class="keyword">for</span>å¾ªç¯ä¼šé»˜è®¤åœ°è°ƒç”¨iteratorå¯¹è±¡çš„next()/__next__()æ–¹æ³•.</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, limit)</span>:</span></span><br><span class="line">    	self.limit = limit</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">    	self.x = <span class="number">10</span></span><br><span class="line">	<span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></span><br><span class="line">    	x = self.x</span><br><span class="line">	<span class="keyword">if</span> x &gt; self.limit:</span><br><span class="line">	   <span class="keyword">raise</span> StopIteration</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Test(<span class="number">15</span>):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Test(<span class="number">5</span>):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> å­¦ä¹ æ˜¯ä¸€ç”Ÿçš„äº‹æƒ… </p>
      <p class="subtitle">  </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text=æœ€è¿‘æœ‰åœ¨ç”¨ Python åšç‚¹ä¸œè¥¿, æ¥"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'Taaaaaaang';
  
  var disqus_url = 'https://taaaaaaang.github.io/2017/01/20/Pythonä¸­çš„yield-iterator/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
